"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};parcelRequire=function(e,t,n,r){function o(n,r){function i(e){return o(i.resolve(e))}function u(t){return e[n][1][t]||t}if(!t[n]){if(!e[n]){var l="function"==typeof parcelRequire&&parcelRequire;if(!r&&l)return l(n,!0);if(a)return a(n,!0);if(s&&"string"==typeof n)return s(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}i.resolve=u,i.cache={};var h=t[n]=new o.Module(n);e[n][0].call(h.exports,i,h,h.exports,this)}return t[n].exports}function i(e){this.id=e,this.bundle=o,this.exports={}}var a="function"==typeof parcelRequire&&parcelRequire,s="function"==typeof require&&require;o.isParcelRequire=!0,o.Module=i,o.modules=e,o.cache=t,o.parent=a,o.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]};for(var u,l=0;l<n.length;l++)try{o(n[l])}catch(e){u||(u=e)}if(n.length){var c=o(n[n.length-1]);"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd&&define(function(){return c})}if(parcelRequire=o,u)throw u;return o}({"deparam.ts":[function(e,t,n){function r(e){for(var t,n=/\+/g,r=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(n," "))},i={};t=r.exec(e);)i[o(t[1])]=o(t[2]);return i}function o(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&e[n]&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}Object.defineProperty(n,"__esModule",{value:!0}),n.deparam=r,n.param=o},{}],"repo-regex.ts":[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=/^([\w-_]+)\/([\w-_.]+)$/i;n.default=r},{}],"beaudar-api.ts":[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GISSUES_API=void 0;n.GISSUES_API="https://oauth.applinzi.com"},{}],"measure.ts":[function(e,t,n){function r(e){a=e,addEventListener("resize",i),addEventListener("load",i)}function o(){var e=document.body.scrollHeight;if(e!==s){s=e;var t={type:"resize",height:e};parent.postMessage(t,a)}}function i(){var e=Date.now();e-u>50&&(u=e,setTimeout(o,50))}Object.defineProperty(n,"__esModule",{value:!0}),n.startMeasuring=r,n.scheduleMeasure=i;var a,s=-1,u=0},{}],"new-error-element.ts":[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NewErrorElement=void 0;var r=e("./measure"),o=function(){function e(){this.beaudarArticle='\n  <article class="timeline-comment">\n    <a class="avatar" href="https://gitee.com/yakeing" target="_blank">\n      <img height="44" width="44" src="https://gitee.com/gissues/docs/raw/main/logo/logo_50x50.png">\n    </a>\n    <div class="comment">\n      <header class="comment-header">\n        <span class="comment-meta">\n          <strong class="comment-author">Gissues</strong> 系统消息\n        </span>\n      </header>\n      <article id="beaudarMsg" class="markdown-body">\n      </article>\n    </div>\n  </article>\n',null===document.querySelector(".timeline")?(this.isTimelineNull=!0,this.element=document.createElement("main"),this.element.classList.add("timeline"),this.element.innerHTML=this.beaudarArticle):(this.isTimelineNull=!1,this.element=document.querySelector(".timeline"),null===document.querySelector("#beaudarMsg")&&this.element.lastElementChild.insertAdjacentHTML("beforebegin",this.beaudarArticle))}return e.prototype.createMsgElement=function(e,t,n){var o=document.querySelector(".beaudarLoading"),i="";o&&o.remove(),n&&(i='<button id="reload-button" type="button" class="btn btn-primary" >刷新</button>'),this.element.querySelector("#beaudarMsg").insertAdjacentHTML("beforeend","\n    <h3>"+e+"</h3>\n    "+t+'\n    <p> 或者尝试重新登录：<a href="https://oauth.applinzi.com/Gissues/authorize.php" target="_blank">登录</a></p>\n    '+i),this.isTimelineNull?document.body.appendChild(this.element):this.element.lastElementChild.remove();var a=this.element.querySelector("#reload-button");a&&(a.onclick=function(){window.location.reload(!0)}),(0,r.scheduleMeasure)()},e}();n.NewErrorElement=o},{"./measure":"measure.ts"}],"oauth.ts":[function(e,t,n){function r(e){return i.GISSUES_API+"/Gissues/authorize.php?"+(0,a.param)({state:e})}function o(){return u(this,void 0,Promise,function(){var e,t,n;return l(this,function(r){switch(r.label){case 0:return c.value?[2,c.value]:(e=i.GISSUES_API+"/Gissues/token.php",[4,fetch(e,{method:"POST",mode:"cors",credentials:"include"}).catch(function(e){throw(new s.NewErrorElement).createMsgElement("token 请求失败","网络断开或网络不稳定，检查网络连接正常后，点击“刷新”重试。",!0),new Error("token 请求失败，"+e)})]);case 1:return t=r.sent(),t.ok?[4,t.json()]:[3,3];case 2:return n=r.sent(),c.value=n,[2,n];case 3:return[2,null]}})})}Object.defineProperty(n,"__esModule",{value:!0}),n.getLoginUrl=r,n.loadToken=o,n.token=void 0;var i=e("./beaudar-api"),a=e("./deparam"),s=e("./new-error-element"),u=function(e,t,n,r){function o(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},l=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&n[0]?i.return:n[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},c={value:null};n.token=c},{"./beaudar-api":"beaudar-api.ts","./deparam":"deparam.ts","./new-error-element":"new-error-element.ts"}],"page-attributes.ts":[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.pageAttributes=void 0;var r=e("./deparam"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("./repo-regex")),i=e("./oauth"),a=function(){var e=(0,r.deparam)(location.search.substr(1)),t=null,n=null;if("issue-term"in e){if(void 0!==(t=e["issue-term"])){if(""===t)throw new Error("指定的 issue-term 不能为空");if(-1!==["title","url","pathname","og:title"].indexOf(t)){if(!e[t])throw new Error('找不到 "'+t+'" 这个 issue 的信息');t=e[t]}}}else{if(!("issue-number"in e))throw new Error('"issue-term" 或 "issue-number" 是必须项');if(n=e["issue-number"],n.slice(0,6)!==n)throw new Error("issue-number 无效，"+n+" 必须是6个字符串")}if(!("repo"in e))throw new Error('仓库 "repo" 是必须项');if(!("origin"in e))throw new Error('来源 "origin" 是必须项');var a=o.default.exec(e.repo);if(null===a)throw new Error('无效的仓库 repo: "'+e.repo+'"');return e.token&&(i.token.value=e.token),{owner:a[1],repo:a[2],branch:e.branch||"master",issueTerm:t,issueNumber:n,origin:e.origin,url:e.url,title:e.title,description:e.description,label:e.label,author:e.author,theme:e.theme||"github-light",loading:e.loading||"true"}}();n.pageAttributes=a},{"./deparam":"deparam.ts","./repo-regex":"repo-regex.ts","./oauth":"oauth.ts"}],"encoding.ts":[function(e,t,n){function r(e){return e=e.replace(/\s/g,""),decodeURIComponent(escape(atob(e)))}Object.defineProperty(n,"__esModule",{value:!0}),n.decodeBase64UTF8=r},{}],"github.ts":[function(e,t,n){function r(e){L=e.author,S=e.owner,T=e.repo,I=e.label,P=e.branch}function o(e,t,n){var r=0===e.indexOf("http")?e:x+e;"query"==t&&null!==b.token.value&&(r=-1!==e.indexOf("?")?r+"&access_token="+b.token.value:r+"?access_token="+b.token.value);var o=new Headers;o.append("Content-Type",_+";charset=UTF-8"),n=n||{},n.mode="cors",n.headers=o,n.cache="no-cache",n.referrer="/api/v5/swagger",n.referrerPolicy="unsafe-url";var i=new Request(r,n);return i.headers.set("Accept",A),"headers"==t&&null!==b.token.value&&i.headers.set("Authorization","token "+b.token.value),i}function i(e){return fetch(e).then(function(t){return 401===t.status&&(b.token.value=null),403===t.status&&t.json().then(function(e){"Resource not accessible by integration"===e.message&&window.dispatchEvent(new CustomEvent("not-installed"))}),a(t),"GET"===e.method&&-1!==[401,403].indexOf(t.status)&&e.headers.has("Authorization")?(e.headers.delete("Authorization"),i(e)):t})}function a(e){var t=e.headers.get("X-RateLimit-Limit"),n=e.headers.get("X-RateLimit-Remaining"),r=e.headers.get("X-RateLimit-Reset"),o=/\/search\//.test(e.url),i=o?O.search:O.standard;if(i.limit=+t,i.remaining=+n,i.reset=+r,403===e.status&&0===i.remaining){var a=new Date(0);a.setUTCSeconds(i.reset);var s=Math.round((a.getTime()-(new Date).getTime())/1e3/60),u=o?"search API":"non-search APIs";console.warn("超出了 "+u+" 的速率限制 "+u+"，在 "+s+" 分钟后重置")}}function s(e){var t=e.headers.get("link");if(null===t)return 0;var n=/\?page=([2-9][0-9]*)>; rel="next"/.exec(t);return null===n?0:+n[1]}function u(e,t){void 0===t&&(t=!1);var n=o("repos/"+S+"/"+T+"/contents/"+e+"?ref="+P,"query");return t&&n.headers.set("accept",k),i(n).then(function(n){if(404===n.status){throw(new y.NewErrorElement).createMsgElement('缺少 "'+e+'" 配置','<p>在存储库 "'+S+"/"+T+'" 中，"'+P+'" 分支下找不到 "'+e+'"。</p>'),new Error('在存储库 "'+S+"/"+T+'" 中，"'+P+'" 分支下找不到 "'+e+'"')}if(void 0===n||!n.ok)throw new Error(e+" 提取失败");return t?n.text():n.json()}).then(function(e){if(t)return e;var n=e.content,r=(0,v.decodeBase64UTF8)(n);return JSON.parse(r)})}function l(e){return i(o("search/issues?q="+encodeURIComponent(e)+"&repo="+S+"%2F"+T+"&author="+L+"&label="+I+"&sort=updated_at&order=asc","query")).then(function(e){if(void 0===e||!e.ok)throw new Error("搜索 Issues 失败。");return e.json()}).then(function(t){if(0===t.length)return null;t.length>1&&console.warn("匹配到 "+t.length+' 个问题 "'+e+'"'),e=e.toLowerCase();for(var n=0,r=t;n<r.length;n++){var o=r[n];if(-1!==o.title.toLowerCase().indexOf(e))return o}return console.warn('Issue 搜索结果中没有与 "'+e+'" 标题匹配的评论当前使用第一个匹配项'),t.items[0]})}function c(e){return i(o("repos/"+S+"/"+T+"/issues/"+e,"query")).then(function(e){if(void 0===e||!e.ok)throw new Error("通过 Issue 编号提取评论时出错");return e.json()})}function h(e,t){return i(o("repos/"+S+"/"+T+"/issues/"+e+"/comments?page="+t+"&per_page="+M,"query")).then(function(e){if(void 0===e||!e.ok)throw new Error("提取评论时出错。");return e.json()})}function m(){return null===b.token.value?Promise.resolve(null):i(o("user","query")).then(function(e){return e.ok?e.json():null})}function d(e,t,n,r,a){return i(o("/repos/"+S+"/issues","query",{method:"POST",body:JSON.stringify({access_token:b.token.value,repo:T,title:e,body:r+" #"+n+"\n\n ["+t+"]("+t+")",assignee:L,labels:a})})).then(function(e){if(void 0===e||!e.ok)throw new Error("创建评论 issue 时出错");return e.json()})}function p(e,t){return i(o("repos/"+S+"/"+T+"/issues/"+e+"/comments","query",{method:"POST",body:JSON.stringify({access_token:b.token.value,body:t})})).then(function(e){if(void 0===e||!e.ok)throw new Error("发布评论时出错");return e.json()})}function f(e,t){return w(this,void 0,void 0,function(){var n,r,a,s,u,l;return E(this,function(c){switch(c.label){case 0:return n=JSON.stringify(t),r=o(e,null,{method:"POST",body:n}),[4,i(r)];case 1:return a=c.sent(),a.ok?[4,a.json()]:[3,3];case 2:return u=c.sent(),[3,4];case 3:u=null,c.label=4;case 4:if(s=u,201===a.status)return[2,{reaction:s,deleted:!1}];if(200!==a.status)throw new Error("预期的“ 201 响应已创建”或“ 200 响应已存在”");return l=o("reactions/"+s.id,null,{method:"DELETE"}),[4,i(l)];case 5:return c.sent(),[2,{reaction:s,deleted:!0}]}})})}function g(e){return i(o("markdown","query",{method:"POST",body:JSON.stringify({access_token:b.token.value,text:e})})).then(function(e){return e.text()})}Object.defineProperty(n,"__esModule",{value:!0}),n.setRepoContext=r,n.readRelNext=s,n.loadJsonFile=u,n.loadIssueByTerm=l,n.loadIssueByNumber=c,n.loadCommentsPage=h,n.loadUser=m,n.createIssue=d,n.postComment=p,n.toggleReaction=f,n.renderMarkdown=g,n.reactionTypes=n.PAGE_SIZE=n.GITEE_API=void 0;var b=e("./oauth"),v=e("./encoding"),y=e("./new-error-element"),w=function(e,t,n,r){function o(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},E=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&n[0]?i.return:n[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},x="https://gitee.com/api/v5/";n.GITEE_API=x;var k="text/html",A="text/plain",_="application/json",M=25;n.PAGE_SIZE=M;var C=["+1","-1","smile","tada","confused","heart","rocket","eyes"];n.reactionTypes=C;var L,S,T,I,P,O={standard:{limit:Number.MAX_VALUE,remaining:Number.MAX_VALUE,reset:0},search:{limit:Number.MAX_VALUE,remaining:Number.MAX_VALUE,reset:0}}},{"./oauth":"oauth.ts","./encoding":"encoding.ts","./new-error-element":"new-error-element.ts"}],"time-ago.ts":[function(e,t,n){function r(e,t){var n=e-t.getTime();if(n<5e3)return" 刚刚";for(var r=0;r+2<o.length&&1.1*n>o[r+2];)r+=2;var a=o[r],s=o[r+1],u=Math.round(n/a);return u>3&&r===o.length-2?"于 "+t.toLocaleDateString(void 0,i):1===u?"于 1 "+s+"前":"于 "+u+" "+s+"前"}Object.defineProperty(n,"__esModule",{value:!0}),n.timeAgo=r;var o=[1e3,"秒",6e4,"分钟",36e5,"个小时",864e5,"天",6048e5,"周",23328e5,"个月"],i={month:"short",day:"numeric",year:"numeric"}},{}],"reactions.ts":[function(e,t,n){function r(e,t,n){return n=n&&!isNaN(n)?n:0,'\n  <button\n    reaction\n    type="submit"\n    action="javascript:"\n    formaction="https://gitee.com/'+l.pageAttributes.owner+"/"+l.pageAttributes.repo+'/reactions"\n    class="btn BtnGroup-item btn-outline reaction-button"\n    value="'+e+'"\n    aria-label="Toggle '+d[e]+' reaction"\n    reaction-count="'+n+'"\n    '+(t?"disabled":"")+'>\n    <img class="reaction-img" alt="'+e+'" src="'+p[e]+'">\n  </button>'}function o(e){var t=this,n=function(n){return h(t,void 0,void 0,function(){var t,r,o,i,a,u,l,h,d,p,f,g;return m(this,function(m){switch(m.label){case 0:return(t=n.target instanceof HTMLElement&&n.target.closest("button"))&&t.hasAttribute("reaction")?(n.preventDefault(),e?(t.disabled=!0,r=t.closest("details"),r&&(r.open=!1),o=t.formAction,i=t.value,a={text:i,target_id:3658402,target_type:"Note"},[4,(0,s.toggleReaction)(o,a)]):[2]):[2];case 1:for(u=m.sent().deleted,l='button[reaction][formaction="'+o+'"][value="'+i+'"],[reaction-count][reaction-url="'+o+'"]',h=Array.from(document.querySelectorAll(l)),d=u?-1:1,p=0,f=h;p<f.length;p++)g=f[p],g.setAttribute("reaction-count",(parseInt(g.getAttribute("reaction-count"),10)+d).toString());return t.disabled=!1,(0,c.scheduleMeasure)(),[2]}})})};addEventListener("click",n,!0)}function i(e){var t="center"===e?"left: 50%;transform: translateX(-50%)":"right:16px",n="center"===e?"":"Popover-message--top-right",o=function(e){return r(e,!1,0)+'<span class="reaction-name" aria-hidden="true">'+d[e]+"</span>"};return'\n  <details class="details-overlay details-popover reactions-popover">\n    <summary '+("center"===e?'tabindex="-1"':"")+">"+f+'</summary>\n    <div class="Popover" style="'+t+'">\n      <form class="Popover-message '+n+' box-shadow-large" action="javascript:">\n        <span class="reaction-name">选择你的表情符号</span>\n        <div class="BtnGroup">\n          '+s.reactionTypes.slice(0,4).map(o).join("")+'\n        </div>\n        <div class="BtnGroup">\n          '+s.reactionTypes.slice(4).map(o).join("")+"\n        </div>\n      </form>\n    </div>\n  </details>"}function a(e){return'\n  <details class="details-overlay details-popover reactions-popover">\n    <summary aria-label="Reactions Menu">'+f+'</summary>\n    <div class="Popover" style="'+("center"===e?"left: 50%;transform: translateX(-50%)":"right:6px")+'">\n      <div class="Popover-message '+("center"===e?"":"Popover-message--top-right")+' box-shadow-large" style="padding: 16px">\n        <span><a href="'+(0,u.getLoginUrl)(l.pageAttributes.url)+'" target="_top">登录</a> 后你可以添加表情符号</span>\n      </div>\n    </div>\n  </details>'}Object.defineProperty(n,"__esModule",{value:!0}),n.getReactionHtml=r,n.enableReactions=o,n.getReactionsMenuHtml=i,n.getSignInToReactMenuHtml=a,n.reactionImgUrl=n.reactionNames=void 0;var s=e("./github"),u=e("./oauth"),l=e("./page-attributes"),c=e("./measure"),h=function(e,t,n,r){function o(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},m=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&n[0]?i.return:n[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},d={"+1":"赞同","-1":"不赞同",smile:"笑脸",tada:"撒花",confused:"疑问",heart:"喜欢",rocket:"火箭",eyes:"瞩目"};n.reactionNames=d;var p={"+1":"https://gitee.com/assets/emoji/+1.png","-1":"https://gitee.com/assets/emoji/-1.png",smile:"https://gitee.com/assets/emoji/smile.png",tada:"https://gitee.com/assets/emoji/tada.png",confused:"https://gitee.com/assets/emoji/confused.png",heart:"https://gitee.com/assets/emoji/heart.png",rocket:"https://gitee.com/assets/emoji/rocket.png",eyes:"https://gitee.com/assets/emoji/eyes.png"};n.reactionImgUrl=p;var f='<svg class="octicon" style="margin-right:3px" viewBox="0 0 7 16" version="1.1" width="7" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 4H3v3H0v1h3v3h1V8h3V7H4V4z"></path></svg><svg class="octicon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm4.81 12.81a6.72 6.72 0 0 1-2.17 1.45c-.83.36-1.72.53-2.64.53-.92 0-1.81-.17-2.64-.53-.81-.34-1.55-.83-2.17-1.45a6.773 6.773 0 0 1-1.45-2.17A6.59 6.59 0 0 1 1.21 8c0-.92.17-1.81.53-2.64.34-.81.83-1.55 1.45-2.17.62-.62 1.36-1.11 2.17-1.45A6.59 6.59 0 0 1 8 1.21c.92 0 1.81.17 2.64.53.81.34 1.55.83 2.17 1.45.62.62 1.11 1.36 1.45 2.17.36.83.53 1.72.53 2.64 0 .92-.17 1.81-.53 2.64-.34.81-.83 1.55-1.45 2.17zM4 6.8v-.59c0-.66.53-1.19 1.2-1.19h.59c.66 0 1.19.53 1.19 1.19v.59c0 .67-.53 1.2-1.19 1.2H5.2C4.53 8 4 7.47 4 6.8zm5 0v-.59c0-.66.53-1.19 1.2-1.19h.59c.66 0 1.19.53 1.19 1.19v.59c0 .67-.53 1.2-1.19 1.2h-.59C9.53 8 9 7.47 9 6.8zm4 3.2c-.72 1.88-2.91 3-5 3s-4.28-1.13-5-3c-.14-.39.23-1 .66-1h8.59c.41 0 .89.61.75 1z"></path></svg>'},{"./github":"github.ts","./oauth":"oauth.ts","./page-attributes":"page-attributes.ts","./measure":"measure.ts"}],"comment-component.ts":[function(e,t,n){function r(e){Array.from(e.querySelectorAll(":not(.email-hidden-toggle) > a")).forEach(function(e){e.target="_blank",e.rel="noopener noreferrer"}),Array.from(e.querySelectorAll("img")).forEach(function(e){e.onload=s.scheduleMeasure,e.title=e.alt,e.src=e.getAttribute("data-canonical-src");var t=e.parentElement;"A"===t.nodeName&&(t.href=e.getAttribute("data-canonical-src"))}),Array.from(e.querySelectorAll("a.commit-tease-sha")).forEach(function(e){return e.href="https://gitee.com"+e.pathname})}Object.defineProperty(n,"__esModule",{value:!0}),n.processRenderedMarkdown=r,n.CommentComponent=void 0;var o=e("./page-attributes"),i=e("./github"),a=e("./time-ago"),s=e("./measure"),u=e("./reactions"),l="data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 16" version="1.1"><path fill="rgb(179,179,179)" fill-rule="evenodd" d="M8 10.5L9 14H5l1-3.5L5.25 9h3.5L8 10.5zM10 6H4L2 7h10l-2-1zM9 2L7 3 5 2 4 5h6L9 2zm4.03 7.75L10 9l1 2-2 3h3.22c.45 0 .86-.31.97-.75l.56-2.28c.14-.53-.19-1.08-.72-1.22zM4 9l-3.03.75c-.53.14-.86.69-.72 1.22l.56 2.28c.11.44.52.75.97.75H5l-2-3 1-2z"></path></svg>'),c="https://gitee.com",h="!avatar60",m={COLLABORATOR:"合作者",CONTRIBUTOR:"贡献者",MEMBER:"成员",OWNER:"拥有者",FIRST_TIME_CONTRIBUTOR:"初期贡献者",FIRST_TIMER:"沙发",NONE:""},d=function(){function e(e,t,n,s){this.comment=e,this.CommentAuthor=t,this.currentUser=n;var d=e.body,p=e.created_at,f=e.id,g=(e.source,e.target),b=(e.updated_at,e.user),v=t===b.login?"OWNER":"NONE",y={"+1":1},w=c+"/"+o.pageAttributes.owner+"/"+o.pageAttributes.repo+"/issues/"+g.issue.number+"#note_"+f;if(-1!==b.avatar_url.indexOf("no_portrait.png"))var E=l;else var E=""+b.avatar_url+h;this.element=document.createElement("article"),this.element.classList.add("timeline-comment"),b.login===n&&this.element.classList.add("current-user");var x=m[v],k=i.reactionTypes.reduce(function(e,t){return e+y[t]},0),A="",_="";s||(n?(A=(0,u.getReactionsMenuHtml)("right"),_=(0,u.getReactionsMenuHtml)("center")):(A=(0,u.getSignInToReactMenuHtml)("right"),_=(0,u.getSignInToReactMenuHtml)("center"))),this.element.innerHTML='\n      <a class="avatar" href="'+b.html_url+'" target="_blank">\n        <img alt="@'+b.login+'" height="44" width="44" src="'+E+'">\n      </a>\n      <div class="comment">\n        <header class="comment-header">\n          <span class="comment-meta">\n            <a class="text-link comment-author" href="'+b.html_url+'" target="_blank"><strong>'+b.name+'</strong></a>\n            评论<a class="text-link" href="'+w+'" target="_blank">'+(0,a.timeAgo)(Date.now(),new Date(p))+'</a>\n          </span>\n          <div class="comment-actions">\n            '+(x?'<span class="author-association-badge">'+x+"</span>":"")+"\n            "+A+'\n          </div>\n        </header>\n        <div class="markdown-body markdown-body-scrollable">\n          '+d+'\n        </div>\n        <div class="comment-footer" reaction-count="'+k+'" reaction-url="https://gitee.com/'+o.pageAttributes.owner+"/"+o.pageAttributes.repo+'/reactions">\n          <form class="reaction-list BtnGroup" action="javascript:">\n            '+i.reactionTypes.map(function(e){return(0,u.getReactionHtml)(e,!n||s,y[e])}).join("")+"\n          </form>\n          "+_+"\n        </div>\n      </div>";var M=this.element.querySelector(".markdown-body"),C=M.querySelector(".email-hidden-toggle a");if(C){var L=M.querySelector(".email-hidden-reply");C.onclick=function(e){e.preventDefault(),L.classList.toggle("expanded")}}r(M)}return e.prototype.setCurrentUser=function(e){this.currentUser!==e&&(this.currentUser=e,this.comment.user.login===this.currentUser?this.element.classList.add("current-user"):this.element.classList.remove("current-user"))},e}();n.CommentComponent=d},{"./page-attributes":"page-attributes.ts","./github":"github.ts","./time-ago":"time-ago.ts","./measure":"measure.ts","./reactions":"reactions.ts"}],"timeline-component.ts":[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TimelineComponent=void 0;var r=e("./comment-component"),o=e("./measure"),i=function(){function e(e,t){this.user=e,this.issue=t,this.timeline=[],this.count=0,this.element=document.createElement("main"),this.element.classList.add("timeline"),this.element.innerHTML='\n      <h1 class="timeline-header">\n        <a class="text-link" target="_blank"></a>\n      </h1>',this.countAnchor=this.element.firstElementChild.firstElementChild,this.marker=document.createComment("marker"),this.element.appendChild(this.marker),this.setIssue(this.issue),this.renderCount()}return e.prototype.setUser=function(e){this.user=e;for(var t=e?e.login:null,n=0;n<this.timeline.length;n++)this.timeline[n].setCurrentUser(t);(0,o.scheduleMeasure)()},e.prototype.setIssue=function(e){this.issue=e,e?(this.count=e.comments,this.countAnchor.href=e.html_url,this.renderCount()):this.countAnchor.removeAttribute("href")},e.prototype.insertComment=function(e,t,n){var i=new r.CommentComponent(e,t,this.user?this.user.login:null,this.issue.locked),a=this.timeline.findIndex(function(t){return t.comment.id>=e.id});if(-1===a)this.timeline.push(i),this.element.insertBefore(i.element,this.marker);else{var s=this.timeline[a],u=s.comment.id===e.id;this.element.insertBefore(i.element,s.element),this.timeline.splice(a,u?1:0,i),u&&s.element.remove()}n&&(this.count++,this.renderCount()),(0,o.scheduleMeasure)()},e.prototype.insertPageLoader=function(e,t,n){var r=this.timeline.find(function(t){return t.comment.id>=e.id}).element;r.insertAdjacentHTML("afterend",'\n      <div class="page-loader">\n        <div class="zigzag"></div>\n        <button type="button" class="btn btn-outline btn-large">\n          '+t+" 条评论被收起<br/>\n          <span>展开...</span>\n        </button>\n      </div>\n    ");var o=r.nextElementSibling,i=o.lastElementChild,a=i.lastElementChild;return i.onclick=n,{setBusy:function(){a.textContent="加载中...",i.disabled=!0},remove:function(){i.onclick=null,o.remove()}}},e.prototype.renderCount=function(){this.countAnchor.textContent=this.count>=1?this.count+" 条评论":"还没有评论"},e}();n.TimelineComponent=i},{"./comment-component":"comment-component.ts","./measure":"measure.ts"}],"repo-config.ts":[function(e,t,n){function r(){return o||(o=(0,i.loadJsonFile)("gissues.json").then(function(e){return Array.isArray(e.origins)||(e.origins=[]),e},function(){return{origins:[a.pageAttributes.origin]}})),o}Object.defineProperty(n,"__esModule",{value:!0}),n.getRepoConfig=r;var o,i=e("./github"),a=e("./page-attributes")},{"./github":"github.ts","./page-attributes":"page-attributes.ts"}],"new-comment-component.ts":[function(e,t,n){function r(e){var t=function e(){removeEventListener("mousemove",a.scheduleMeasure),removeEventListener("mouseup",e)},n=function(){addEventListener("mousemove",a.scheduleMeasure),addEventListener("mouseup",t)};e.addEventListener("mousedown",n)}Object.defineProperty(n,"__esModule",{value:!0}),n.NewCommentComponent=void 0;var o=e("./page-attributes"),i=e("./github"),a=e("./measure"),s=e("./comment-component"),u=e("./repo-config"),l=e("./oauth"),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},c.apply(this,arguments)},h=function(e,t,n,r){function o(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},m=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&n[0]?i.return:n[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},d="data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 16" version="1.1"><path fill="rgb(179,179,179)" fill-rule="evenodd" d="M8 10.5L9 14H5l1-3.5L5.25 9h3.5L8 10.5zM10 6H4L2 7h10l-2-1zM9 2L7 3 5 2 4 5h6L9 2zm4.03 7.75L10 9l1 2-2 3h3.22c.45 0 .86-.31.97-.75l.56-2.28c.14-.53-.19-1.08-.72-1.22zM4 9l-3.03.75c-.53.14-.86.69-.72 1.22l.56 2.28c.11.44.52.75.97.75H5l-2-3 1-2z"></path></svg>'),p="没有可预览的内容",f=function(){function e(e,t){var n=this;this.user=e,this.submit=t,this.submitting=!1,this.renderTimeout=0,this.handleInput=function(){(0,u.getRepoConfig)(),n.textarea.scrollHeight<450&&n.textarea.offsetHeight<n.textarea.scrollHeight&&(n.textarea.style.height=n.textarea.scrollHeight+"px",(0,a.scheduleMeasure)())},this.previewHTML=function(){var e=n.textarea.value,t=/^\s*$/.test(e);n.submitButton.disabled=t,clearTimeout(n.renderTimeout),t?n.preview.textContent=p:(n.preview.textContent="加载预览中...",n.renderTimeout=(0,i.renderMarkdown)(e).then(function(e){return n.preview.innerHTML=e}).then(function(){return(0,s.processRenderedMarkdown)(n.preview)}).then(a.scheduleMeasure))},this.handleSubmit=function(e){return h(n,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return e.preventDefault(),this.submitting?[2]:(this.submitting=!0,this.textarea.disabled=!0,this.submitButton.disabled=!0,[4,this.submit(this.textarea.value).catch(function(){return 0})]);case 1:return t.sent(),this.submitting=!1,this.textarea.disabled=!this.user,this.textarea.value="",this.submitButton.disabled=!1,this.handleClick(c(c({},e),{target:this.form.querySelector(".tabnav-tab.tab-write")})),this.preview.textContent=p,[2]}})})},this.handleClick=function(e){var t=e.target;if(t instanceof HTMLButtonElement&&t.classList.contains("tabnav-tab")&&"true"!==t.getAttribute("aria-selected")){n.form.querySelector('.tabnav-tab[aria-selected="true"]').setAttribute("aria-selected","false"),t.setAttribute("aria-selected","true");var r=t.classList.contains("tab-preview");n.textarea.style.display=r?"none":"",n.preview.style.display=r?"":"none",(0,a.scheduleMeasure)()}},this.handleKeyDown=function(e){var t=e.which,r=e.ctrlKey;13===t&&r&&!n.submitButton.disabled&&n.form.dispatchEvent(new CustomEvent("submit"))},this.element=document.createElement("article"),this.element.classList.add("timeline-comment"),
this.element.innerHTML='\n      <a class="avatar" target="_blank">\n        <img height="44" width="44">\n      </a>\n      <form class="comment" accept-charset="UTF-8" action="javascript:">\n        <header class="new-comment-header tabnav">\n          <nav class="tabnav-tabs" role="tablist">\n            <button type="button" class="tabnav-tab tab-write"\n                    role="tab" aria-selected="true">\n              编辑\n            </button>\n            <button type="button" class="tabnav-tab tab-preview"\n                    role="tab">\n              预览\n            </button>\n          </nav>\n        </header>\n        <div class="comment-body">\n          <textarea class="form-control" placeholder="Leave a comment" aria-label="comment"></textarea>\n          <div class="markdown-body" style="display: none">\n            '+p+'\n          </div>\n        </div>\n        <footer class="new-comment-footer">\n          <a class="text-link markdown-info" target="_blank"\n             href="https://commonmark.org/help/">\n            <svg class="octicon v-align-bottom" viewBox="0 0 16 16" version="1.1"\n              width="16" height="16" aria-hidden="true">\n              <path fill-rule="evenodd" d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15\n                13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4\n                8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z">\n              </path>\n            </svg>\n            支持 Markdown 编辑\n          </a>\n          <button class="btn btn-primary" type="submit">发表评论</button>\n          <a class="btn btn-primary" href="'+(0,l.getLoginUrl)(o.pageAttributes.url)+'" target="_top">登录</a>\n        </footer>\n      </form>',this.avatarAnchor=this.element.firstElementChild,this.avatar=this.avatarAnchor.firstElementChild,this.form=this.avatarAnchor.nextElementSibling,this.textarea=this.form.firstElementChild.nextElementSibling.firstElementChild,this.previewButton=this.form.firstElementChild.firstElementChild.lastElementChild,this.preview=this.form.firstElementChild.nextElementSibling.lastElementChild,this.signInAnchor=this.form.lastElementChild.lastElementChild,this.submitButton=this.signInAnchor.previousElementSibling,this.setUser(e),this.submitButton.disabled=!0,this.textarea.addEventListener("input",this.handleInput),this.previewButton.addEventListener("click",this.previewHTML),this.form.addEventListener("submit",this.handleSubmit),this.form.addEventListener("click",this.handleClick),this.form.addEventListener("keydown",this.handleKeyDown),r(this.textarea)}return e.prototype.setUser=function(e){this.user=e,this.submitButton.hidden=!e,this.signInAnchor.hidden=!!e,e?(this.avatarAnchor.href=e.html_url,this.avatar.alt="@"+e.login,-1!==e.avatar_url.indexOf("no_portrait.png")?this.avatar.src=d:this.avatar.src=e.avatar_url+"!avatar60",this.textarea.disabled=!1,this.textarea.placeholder="发表评论"):(this.avatarAnchor.removeAttribute("href"),this.avatar.alt="@anonymous",this.avatar.src="https://gissues.gitee.io/docs/logo/logo.svg",this.textarea.disabled=!0,this.textarea.placeholder="登录后评论")},e.prototype.clear=function(){this.textarea.value=""},e}();n.NewCommentComponent=f},{"./page-attributes":"page-attributes.ts","./github":"github.ts","./measure":"measure.ts","./comment-component":"comment-component.ts","./repo-config":"repo-config.ts","./oauth":"oauth.ts"}],"theme.ts":[function(e,t,n){function r(e,t){return new Promise(function(n){var r=document.createElement("link");r.rel="stylesheet",r.setAttribute("crossorigin","anonymous"),r.onload=n,r.href="/stylesheets/themes/"+e+"/gissues.css",document.head.appendChild(r),addEventListener("message",function(e){sessionStorage.setItem("gissues-theme",e.data.theme),e.origin===t&&"set-theme"===e.data.type&&(r.href="/stylesheets/themes/"+e.data.theme+"/gissues.css")})})}Object.defineProperty(n,"__esModule",{value:!0}),n.loadTheme=r},{}],"beaudar-loading.ts":[function(e,t,n){function r(e){return a(this,void 0,Promise,function(){var t,n,r,a,u;return s(this,function(s){return t=document.createElement("div"),n=(0,i.loadTheme)(e.theme,e.origin),r=!1,sessionStorage.getItem("gissues-theme")&&(n=(0,i.loadTheme)(sessionStorage.getItem("gissues-theme"),e.origin)),(-1!==window.navigator.userAgent.indexOf("MSIE")||"ActiveXObject"in window)&&(a=document.createElement("div"),r=!0,a.classList.add("ie-container","markdown-body"),a.innerHTML="\n    <h3>我身处 IE 的花海中......</h3>\n    <p>&emsp;&emsp;从前，有片花田。\n    <br/>&emsp;&emsp;那里很空旷，很寂静。\n    <br/>&emsp;&emsp;微风吹过脸颊，\n    <br/>&emsp;&emsp;有一丝丝甘甜的气息。\n    <br/>&emsp;&emsp;眺望远处，\n    <br/>&emsp;&emsp;绵延的花海仿佛在指引着我们，\n    <br/>&emsp;&emsp;透过它，\n    <br/>&emsp;&emsp;我们理解了这五彩斑斓的世界。\n    </p>\n    <a href='https://www.google.cn/chrome/' target='_blank'>\n    体验新版 Chrome 的更多功能\n    </a>",t.appendChild(a)),JSON.parse(e.loading)&&(u=document.createElement("div"),u.classList.add("beaudarLoading"),u.innerHTML='\n      <a href="https://gissues.gitee.io" target="_blank">\n        <img width="50px" height="50px" src="https://gissues.gitee.io/docs/logo/logo_50x50.png" title="Gissues">\n      </a>',t.appendChild(u)),n.then(function(){document.body.appendChild(t),(0,o.scheduleMeasure)()}),[2,{loadingElement:t,IS_IE:r}]})})}Object.defineProperty(n,"__esModule",{value:!0}),n.beaudarLoadingStatus=r;var o=e("./measure"),i=e("./theme"),a=function(e,t,n,r){function o(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},s=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&n[0]?i.return:n[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}},{"./measure":"measure.ts","./theme":"theme.ts"}],"beaudar.ts":[function(e,t,n){function r(){return null!==i.pageAttributes.issueNumber?(0,a.loadIssueByNumber)(i.pageAttributes.issueNumber):(0,a.loadIssueByTerm)(i.pageAttributes.issueTerm)}function o(e,t){return f(this,void 0,void 0,function(){var n,r,o,i,s,u,l,c,h,m,d=this;return g(this,function(p){switch(p.label){case 0:return n=function(n){for(var r=0,o=n;r<o.length;r++){var i=o[r];t.insertComment(i,e.user.login,!1)}},r=Math.ceil(e.comments/a.PAGE_SIZE),o=[(0,a.loadCommentsPage)(e.number,1)],r>1&&o.push((0,a.loadCommentsPage)(e.number,r)),r>2&&e.comments%a.PAGE_SIZE<3&&o.push((0,a.loadCommentsPage)(e.number,r-1)),[4,Promise.all(o)];case 1:for(i=p.sent(),s=0,u=i;s<u.length;s++)l=u[s],n(l);return c=r-o.length,h=2,m=function(r){if(0!==c)var o=function(){return f(d,void 0,void 0,function(){var t;return g(this,function(r){switch(r.label){case 0:return s.setBusy(),[4,(0,a.loadCommentsPage)(e.number,h)];case 1:return t=r.sent(),s.remove(),n(t),c--,h++,m(t),[2]}})})},i=r.pop(),s=t.insertPageLoader(i,c*a.PAGE_SIZE,o)},m(i[0]),[2]}})})}var i=e("./page-attributes"),a=e("./github"),s=e("./timeline-component"),u=e("./new-comment-component"),l=e("./measure"),c=e("./repo-config"),h=e("./oauth"),m=e("./reactions"),d=e("./new-error-element"),p=e("./beaudar-loading"),f=function(e,t,n,r){function o(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},g=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&n[0]?i.return:n[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};(0,a.setRepoContext)(i.pageAttributes),function(){f(this,void 0,void 0,function(){var e,t,n,b,v,y,w,E,x,k=this;return g(this,function(A){switch(A.label){case 0:return(0,l.startMeasuring)(i.pageAttributes.origin),[4,(0,p.beaudarLoadingStatus)(i.pageAttributes)];case 1:if(e=A.sent(),e.IS_IE)throw new Error("本项目放弃兼容 IE。");return[4,(0,h.loadToken)()];case 2:A.sent(),A.label=3;case 3:return A.trys.push([3,5,,6]),[4,Promise.all([r(),(0,a.loadUser)()])];case 4:return x=A.sent(),t=x[0],n=x[1],[3,6];case 5:throw b=A.sent(),v=new d.NewErrorElement,v.createMsgElement("gitee.com 请求失败","<p>可点击“刷新”，尝试解决此问题。</p>",!0),new Error("gitee.com 请求失败。"+b);case 6:return y=new s.TimelineComponent(n,t),document.body.appendChild(y.element),e.loadingElement.remove(),t&&t.comments>0&&o(t,y),(0,l.scheduleMeasure)(),t&&t.locked?[2]:((0,m.enableReactions)(!!n),w=function(e){return f(k,void 0,void 0,function(){var n,r,o,s,u,l,h;return g(this,function(m){switch(m.label){case 0:return[4,(0,c.getRepoConfig)()];case 1:return n=m.sent().origins,r=i.pageAttributes.origin,o=i.pageAttributes.owner,s=i.pageAttributes.repo,u=i.pageAttributes.label,-1===n.indexOf(r)?[3,5]:t?[3,3]:[4,(0,a.createIssue)(i.pageAttributes.issueTerm,i.pageAttributes.url,i.pageAttributes.title,i.pageAttributes.description||"",i.pageAttributes.label)];case 2:t=m.sent(),y.setIssue(t),m.label=3;case 3:return[4,(0,a.postComment)(t.number,e)];case 4:return l=m.sent(),y.insertComment(l,t.user.login,!0),E.clear(),[3,6];case 5:throw h=new d.NewErrorElement,h.createMsgElement("错误: <code>"+r+"</code> 评论不允许发布到仓库 <code>"+o+"/"+s+"</code>","\n      <p>&emsp;&emsp;请确认 <code>"+o+"/"+s+'</code> 是本站点评论的正确仓库。如果您拥有此仓库，\n      <a href="https://gitee.com/'+o+"/"+s+"/blob/"+u+'/gissues.json" target="_blank">\n        <strong>添加或更新 gissues.json</strong>\n      </a>\n      添加 <code>'+r+"</code> 到来源列表。</p>\n      <p>需要配置：</p>\n      <pre><code>"+JSON.stringify({origins:[r]},null,2)+"</code></pre>\n      "),new Error("评论发布被禁止，<code>"+r+"</code> 评论不允许发布到仓库 <code>"+o+"/"+s+"</code>。");case 6:return[2]}})})},E=new u.NewCommentComponent(n,w),y.element.appendChild(E.element),[2])}})})}(),addEventListener("not-installed",function e(){removeEventListener("not-installed",e),document.querySelector(".timeline").insertAdjacentHTML("afterbegin",'\n  <div class="flash flash-error">\n    错误: Gissues 没有安装在 <code>'+i.pageAttributes.owner+"/"+i.pageAttributes.repo+'</code>。\n    如果你拥有这仓库，\n    <a href="https://gitee.com/oauth/applications/6089" target="_blank"><strong>安装 app</strong></a>。\n  </div>'),(0,l.scheduleMeasure)()})},{"./page-attributes":"page-attributes.ts","./github":"github.ts","./timeline-component":"timeline-component.ts","./new-comment-component":"new-comment-component.ts","./measure":"measure.ts","./repo-config":"repo-config.ts","./oauth":"oauth.ts","./reactions":"reactions.ts","./new-error-element":"new-error-element.ts","./beaudar-loading":"beaudar-loading.ts"}]},{},["beaudar.ts"]);